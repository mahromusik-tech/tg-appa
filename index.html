<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TON Strategy</title>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º SDK –¢–µ–ª–µ–≥—Ä–∞–º–∞ -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* –°—Ç–∏–ª–∏ (CSS) –ø—Ä—è–º–æ –∑–¥–µ—Å—å */
        body {
            background-color: var(--tg-theme-bg-color, #1c1c1e);
            color: var(--tg-theme-text-color, #ffffff);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
            box-sizing: border-box;
        }

        .card {
            background-color: var(--tg-theme-secondary-bg-color, #2c2c2e);
            padding: 20px;
            border-radius: 16px;
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            text-align: center;
        }

        h1 { margin: 0 0 10px 0; font-size: 24px; }
        p { margin: 5px 0; opacity: 0.8; }

        .btn {
            background-color: var(--tg-theme-button-color, #007aff);
            color: var(--tg-theme-button-text-color, #ffffff);
            border: none;
            padding: 16px;
            border-radius: 12px;
            width: 100%;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .btn:active { opacity: 0.8; }
        
        .resource-box {
            font-size: 32px;
            font-weight: bold;
            margin: 20px 0;
        }
    </style>
</head>
<body>

    <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
    <div class="card">
        <h1 id="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</h1>
        <p id="user-id">ID: ...</p>
    </div>

    <div class="card">
        <p>–¢–≤–æ–∏ —Ä–µ—Å—É—Ä—Å—ã</p>
        <div class="resource-box" id="balance">0 üí∞</div>
        <p>–î–æ–±—ã—á–∞ –≤ —á–∞—Å: 100</p>
    </div>

    <button class="btn" onclick="handleMine()">‚õè –°–æ–±—Ä–∞—Ç—å –Ω–∞–ª–æ–≥–∏</button>

    <!-- –õ–æ–≥–∏–∫–∞ (JavaScript) -->
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.expand(); // –†–∞—Å–∫—Ä—ã—Ç—å –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω

        // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const user = tg.initDataUnsafe.user;
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —ç–∫—Ä–∞–Ω–µ
        const nameEl = document.getElementById('user-name');
        const idEl = document.getElementById('user-id');
        const balanceEl = document.getElementById('balance');

        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
        if (user) {
            nameEl.innerText = `–ü—Ä–∞–≤–∏—Ç–µ–ª—å ${user.first_name}`;
            idEl.innerText = `ID: ${user.id}`;
        } else {
            nameEl.innerText = "–ü—Ä–∞–≤–∏—Ç–µ–ª—å –ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π";
            idEl.innerText = "–ó–∞–ø—É—â–µ–Ω–æ –≤–Ω–µ Telegram";
        }

        // –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
        let balance = 0;

        function handleMine() {
            balance += 10;
            balanceEl.innerText = `${balance} üí∞`;
            
            // –í–∏–±—Ä–∞—Ü–∏—è (—Ç–∞–∫—Ç–∏–ª—å–Ω—ã–π –æ—Ç–∫–ª–∏–∫)
            if (tg.HapticFeedback) {
                tg.HapticFeedback.impactOccurred('medium');
            }
        }

        // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≥–ª–∞–≤–Ω—É—é –∫–Ω–æ–ø–∫—É (MainButton) –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞
        tg.MainButton.setText("–ü–æ—Å—Ç—Ä–æ–∏—Ç—å –∫–∞–∑–∞—Ä–º—É (500 üí∞)");
        tg.MainButton.show();
        
        tg.MainButton.onClick(() => {
            if (balance >= 500) {
                balance -= 500;
                balanceEl.innerText = `${balance} üí∞`;
                tg.showAlert("–ö–∞–∑–∞—Ä–º–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞!");
            } else {
                tg.showAlert(`–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç –∑–æ–ª–æ—Ç–∞! –ù—É–∂–Ω–æ –µ—â–µ ${500 - balance}`);
            }
        });

    </script>
</body>
</html>
